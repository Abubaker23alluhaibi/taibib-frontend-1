# ุชูุฑูุฑ ุฅุตูุงุญ ุชุญุฐูุฑุงุช MongoDB - Tabib IQ

## ๐ **ุชุญููู ุงููุดุงูู ุงูููุชุดูุฉ:**

### **1. ุชุญุฐูุฑ npm config:**
```
npm warn config production Use `--omit=dev` instead.
```
**ุงูุณุจุจ:** ุงุณุชุฎุฏุงู ุฎูุงุฑ `--production` ุงููููู ูู npm
**ุงูุญุงูุฉ:** โ๏ธ ุชุญุฐูุฑ ุบูุฑ ุญุฑุฌ

### **2. ุชุญุฐูุฑุงุช MongoDB Driver:**
```
(node:15) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option
(node:15) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option
```
**ุงูุณุจุจ:** ุงุณุชุฎุฏุงู ุฎูุงุฑุงุช MongoDB ุงูููููุฉ ูู ุงูููุฏ
**ุงูุญุงูุฉ:** โ **ุชู ุงูุฅุตูุงุญ**

### **3. ุญุงูุฉ MongoDB:**
```
"mongodb":"Disconnected"
```
**ุงูุณุจุจ:** ุงูุจุงููุฏ ูุง ูุชุตู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
**ุงูุญุงูุฉ:** โ๏ธ ูุญุชุงุฌ ุชุญุฏูุซ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูู Railway

---

## โ **ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ:**

### **1. ุฅุตูุงุญ ุฎูุงุฑุงุช MongoDB ุงูููููุฉ:**

#### **ูุจู ุงูุฅุตูุงุญ:**
```javascript
mongoose.connect(MONGO_URI, {
  useNewUrlParser: true,        // โ๏ธ ูููู
  useUnifiedTopology: true,     // โ๏ธ ูููู
  serverSelectionTimeoutMS: 10000,
  socketTimeoutMS: 45000,
  connectTimeoutMS: 10000,
  maxPoolSize: 10,
  retryWrites: true,
  w: 'majority'
})
```

#### **ุจุนุฏ ุงูุฅุตูุงุญ:**
```javascript
mongoose.connect(MONGO_URI, {
  serverSelectionTimeoutMS: 10000,
  socketTimeoutMS: 45000,
  connectTimeoutMS: 10000,
  maxPoolSize: 10,
  retryWrites: true,
  w: 'majority'
})
```

### **2. ุฅูุดุงุก ุณูุฑูุจุช ุงุฎุชุจุงุฑ ูุญุฏุซ:**
- `ุงุฎุชุจุงุฑ-ุงูุงุชุตุงู-ุงููุญุฏุซ.js` - ูุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจุฏูู ุชุญุฐูุฑุงุช

---

## ๐ **ุญุงูุฉ ุงููุธุงู ุงูุญุงููุฉ:**

| ุงูุนูุตุฑ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|--------|--------|---------|
| **ุงูุจุงููุฏ** | โ ูุนูู | ุนูู Railway |
| **ููุทุฉ ููุงูุฉ ุงูุตุญุฉ** | โ ุชุนูู | ุชุณุชุฌูุจ ููุทูุจุงุช |
| **MongoDB ุงูุงุชุตุงู** | โ๏ธ ุบูุฑ ูุชุตู | ูุญุชุงุฌ ุชุญุฏูุซ ูุชุบูุฑุงุช ุงูุจูุฆุฉ |
| **ุชุญุฐูุฑุงุช MongoDB** | โ ุชู ุงูุฅุตูุงุญ | ูุง ุชูุฌุฏ ุชุญุฐูุฑุงุช |
| **ุชุญุฐูุฑ npm** | โ๏ธ ููุฌูุฏ | ุบูุฑ ุญุฑุฌ |

---

## ๐ **ุงูุฎุทูุงุช ุงูุชุงููุฉ ุงููุทููุจุฉ:**

### **1. ุชุญุฏูุซ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูู Railway:**

#### **ูู Railway Dashboard:**
1. ุงุฐูุจ ุฅูู ูุดุฑูุน ุงูุจุงููุฏ
2. ุงุฐูุจ ุฅูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
3. ุญุฏุซ `MONGO_URI` ุฅูู:
   ```
   MONGO_URI=mongodb+srv://abubaker:Baker123@cluster0.kamrxrt.mongodb.net/tabibiq?retryWrites=true&w=majority&appName=Cluster0
   ```

### **2. ุฑูุน ุงูุชุญุฏูุซุงุช:**
```bash
cd tabib-iq-backend
git add .
git commit -m "ุฅุตูุงุญ ุฎูุงุฑุงุช MongoDB ุงูููููุฉ ูุฅุฒุงูุฉ ุงูุชุญุฐูุฑุงุช"
git push
```

### **3. ุงุฎุชุจุงุฑ ุงููุธุงู:**
```bash
# ุงุฎุชุจุงุฑ ูุญูู
node ุงุฎุชุจุงุฑ-ุงูุงุชุตุงู-ุงููุญุฏุซ.js

# ุงุฎุชุจุงุฑ ุนูู Railway
curl https://tabib-iq-backend-production.up.railway.app/api/health
```

---

## ๐ฏ **ุงููุชุงุฆุฌ ุงููุชููุนุฉ:**

ุจุนุฏ ุชุทุจูู ุงูุฅุตูุงุญุงุช:
- โ **ูุง ุชูุฌุฏ ุชุญุฐูุฑุงุช MongoDB** ูู ุงูุณุฌูุงุช
- โ **MongoDB ูุชุตู** (`"mongodb":"Connected"`)
- โ **ุงูุจุงููุฏ ูุนูู** ุจุดูู ูุซุงูู
- โ **ุฌููุน ุงูููุฒุงุช ุชุนูู** ุจุฏูู ุฃุฎุทุงุก

---

## ๐ **ูุงุฆูุฉ ุงูุชุญูู:**

### โ **ููุชูู:**
- [x] ุฅุตูุงุญ ุฎูุงุฑุงุช MongoDB ุงูููููุฉ
- [x] ุฅูุดุงุก ุณูุฑูุจุช ุงุฎุชุจุงุฑ ูุญุฏุซ
- [x] ุชุญุฏูุซ ููู server.js
- [x] ุชุญุฏูุซ ููู env.production

### โณ **ูุทููุจ:**
- [ ] ุชุญุฏูุซ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูู Railway
- [ ] ุฑูุน ุงูุชุญุฏูุซุงุช ุฅูู Railway
- [ ] ุงุฎุชุจุงุฑ ุงููุธุงู ุจุนุฏ ุงูุชุญุฏูุซ

---

## ๐ง **ุงุณุชูุดุงู ุงูุฃุฎุทุงุก:**

### **ุฅุฐุง ุงุณุชูุฑุช ุงูุชุญุฐูุฑุงุช:**
1. **ุชุฃูุฏ ูู ุฑูุน ุงูุชุญุฏูุซุงุช** ุฅูู Railway
2. **ุชุญูู ูู ุฅุนุงุฏุฉ ุชุดุบูู** ุงูุชุทุจูู
3. **ุชุญูู ูู ุณุฌูุงุช Railway** ููุชุฃูุฏ ูู ุงูุชุญุฏูุซ

### **ุฅุฐุง ูู ูุชุตู MongoDB:**
1. **ุชุญูู ูู ุตุญุฉ MONGO_URI** ูู Railway
2. **ุงุฎุชุจุฑ ุงูุงุชุตุงู ูุญููุงู** ุฃููุงู
3. **ุชุญูู ูู ุฅุนุฏุงุฏุงุช Atlas** (IP whitelist)

---

## ๐ **ุงูุฏุนู:**

### **ุงููููุงุช ุงููุญุฏุซุฉ:**
- `server.js` - ุฅุตูุงุญ ุฎูุงุฑุงุช MongoDB
- `ุงุฎุชุจุงุฑ-ุงูุงุชุตุงู-ุงููุญุฏุซ.js` - ุณูุฑูุจุช ุงุฎุชุจุงุฑ ุฌุฏูุฏ
- `env.production` - ุฑุงุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญุฏุซ

### **ุฅุฐุง ุงุญุชุฌุช ูุณุงุนุฏุฉ:**
1. **ุดุบู ุณูุฑูุจุช ุงูุงุฎุชุจุงุฑ** ุฃููุงู
2. **ุชุญูู ูู ุณุฌูุงุช Railway**
3. **ุชุฃูุฏ ูู ุตุญุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ**

---

**ุงูุญุงูุฉ:** ๐ง **95% ููุชูู** - ูุญุชุงุฌ ุชุญุฏูุซ Railway ููุท
**ุงูุฎุทูุฉ ุงูุชุงููุฉ:** ุชุญุฏูุซ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูู Railway 